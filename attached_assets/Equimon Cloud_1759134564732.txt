Техническое задание (ТЗ) на разработку облачной платформы EQUIMON
1. Общие сведения
1.1. Название проекта
Облачная платформа EQUIMON — веб-приложение для сбора, хранения, анализа и мониторинга данных, поступающих от технологического оборудования и умных датчиков на производственных площадках.

1.2. Цель разработки
Создание облачной платформы EQUIMON, обеспечивающей централизованный сбор, хранение, анализ и визуализацию технологических данных и метрик мониторинга с локальных базовых станций, развернутых на производственных площадках. Платформа должна обеспечивать безопасный, масштабируемый и удобный доступ для различных категорий пользователей с поддержкой ролевого доступа, интеграции с внешними системами и автоматизированного управления устройствами.

2. Описание системы
2.1. Архитектура системы
Платформа EQUIMON построена по модели клиент-сервер, с распределением функций между:

Локальные базовые станции (Edge-устройства) — физически размещаются на производственных площадках, собирают и локально хранят данные от измерительных устройств, периодически отправляют данные в облако.
Облачная платформа EQUIMON (Cloud-сервис) — централизованная веб-система, реализующая хранение, анализ, визуализацию и управление данными и устройствами.
Внешние системы — могут интегрироваться через REST API платформы.
2.2. Участники системы
Компания-пользователь — владелец производственных площадок и оборудования.
Пользователи компании — администраторы, операторы, мониторинг-специалисты.
Базовая станция (Edge-устройство) — локальное устройство, собирающее данные и метрики.
Технологическое оборудование и умные датчики — устройства, генерирующие измеряемые параметры.
Внешние системы — ERP, MES, SCADA, системы оповещения и др.
3. Функциональные требования
3.1. Многопользовательский доступ и ролевое разграничение доступа
Платформа должна поддерживать ролевую модель доступа с тремя основными ролями:

Роль	Права и функции
Администратор компании	- Управление пользователями (добавление, редактирование, удаление)
- Управление лицензиями (активация, продление, отключение)
- Активация базовых станций
- Выбор и изменение тарифного плана
- Просмотр статистики по всем станциям и устройствам
- Настройка общих параметров компании
Оператор производства	- Настройка базовых станций, оборудования и датчиков
- Просмотр и анализ данных в реальном времени и архиве
- Построение графиков, фильтрация данных
- Настройка оповещений и мониторинга
- Экспорт данных
Мониторинг	- Просмотр всех данных и метрик от всех базовых станций
- Просмотр графиков и отчетов
- Получение оповещений
- Ограниченный доступ к настройкам (без права изменения конфигурации)
Примечание: Роли могут быть настроены администратором. Пользователи могут иметь несколько ролей.

3.2. Управление базовыми станциями и устройствами
3.2.1. Активация базовой станции
Поддержка двух способов активации:
Сканирование QR-кода — пользователь сканирует QR-код, нанесённый на корпус базовой станции (содержит UUID).
Ручной ввод UUID — ввод уникального идентификатора станции.
При активации:
Проверяется наличие активной лицензии компании.
Привязка лицензии к конкретному экземпляру базовой станции (одна лицензия — одна станция).
Создание записи о станции в системе (с привязкой к компании).
Генерация уникального токена доступа для станции (для аутентификации при отправке данных).
3.2.2. Управление станциями и устройствами
Просмотр списка всех базовых станций компании с фильтрацией по:
Статусу (активна, отключена, ошибка, ожидает активации)
Геолокации (если указана)
Последнему обновлению данных
Типу оборудования
Поддержка визуализации структуры: станция → подключенные устройства (технологическое оборудование, датчики).
Детальная информация по каждому устройству:
Тип, модель, серийный номер
Статус подключения
Последние измеренные значения
История метрик (включая uptime, загрузку CPU, память, сетевую активность)
Возможность редактирования метаданных устройства (например, название, категория, местоположение).
3.3. Хранение и анализ технологических данных
3.3.1. Долговременное хранение
Данные хранятся в облачной СУБД (например, PostgreSQL, Amazon Aurora, Google Cloud Spanner).
Обеспечена надежность и резервное копирование (ежедневные бэкапы, георепликация).
Хранение данных — не менее 5 лет (по умолчанию; настраивается в зависимости от тарифа).
3.3.2. Поиск и фильтрация
Поиск по следующим параметрам:
Диапазон времени (дата, время начала/конца)
Идентификаторы станций, устройств, датчиков
Значения параметров (например, температура > 80°C)
Параметр (например, "давление", "влажность", "ток")
Поддержка сложных условий поиска (логические операторы: AND/OR/NOT).
3.3.3. Визуализация и анализ
Построение графиков:
Линейные, столбчатые, кольцевые графики.
Многомерные графики (по нескольким параметрам одновременно).
Возможность наложения нескольких данных на один график.
Статистическая обработка:
Среднее, медиана, мин/макс, стандартное отклонение.
Гистограммы распределения.
Корреляционный анализ между параметрами.
Экспорт результатов анализа в форматы: CSV, JSON, PDF, Excel.
3.4. Мониторинг и оповещения
3.4.1. Настройка мониторинга
Настройка правил мониторинга на основе:
Параметров датчиков (например, температура > 90°C)
Метрик станции (например, потеря связи > 5 мин)
Динамических условий (например, скачок давления за 1 минуту > 10%)
Поддержка временных интервалов (например, только в рабочее время).
Возможность настройки уровней критичности: информационный, предупреждение, критическая ошибка.
3.4.2. Система оповещений
Оповещения отправляются через:
E-mail
SMS (через интеграцию с SMS-шлюзом)
Push-уведомления в веб-интерфейсе
Интеграция с системами типа Slack, Telegram, Microsoft Teams (через вебхуки)
Поддержка групповых уведомлений по ролям (например, "все операторы" или "все администраторы").
Логирование всех оповещений с указанием времени, типа, получателя и статуса доставки.
3.5. REST API
Платформа предоставляет полнофункциональный REST API для:

Интеграции с базовыми станциями.
Внешних систем (ERP, MES, BI, SCADA).
Автоматизации задач (например, массовая активация станций, загрузка данных).
Требования к API:
Все запросы требуют аутентификации через JWT-токены.
Поддержка стандартных HTTP-методов: GET, POST, PUT, DELETE.
Чёткая документация API (через Swagger/OpenAPI).
Ограничение скорости (rate limiting) для защиты от DDoS.
Поддержка пагинации, фильтрации, сортировки.
Основные эндпоинты:
/api/v1/stations/activate — активация станции (QR/UUID)
/api/v1/stations/{id}/data — получение данных с устройства
/api/v1/stations/{id}/metrics — получение метрик станции
/api/v1/data/search — поиск данных
/api/v1/alerts — управление правилами оповещений
/api/v1/users — управление пользователями
/api/v1/licenses — управление лицензиями
4. Нецелевые требования (Non-functional requirements)
Категория	Требование
Производительность	Ответ на запрос — не более 500 мс (в 95% случаев).
Доступность	99.9% uptime (в течение года).
Масштабируемость	Поддержка до 10 000 базовых станций и 100 000 устройств.
Безопасность	- Шифрование данных в транзите (TLS 1.3+) и в покое (AES-256)
- Хранение токенов в защищённом хранилище
- Аудит всех действий пользователей (логирование)
- Защита от SQL-инъекций, XSS, CSRF
Мобильность	Веб-интерфейс доступен с любых устройств (ПК, планшеты, смартфоны).
Мультиязычность	Поддержка русского и английского языков.
Интеграция	Поддержка интеграции с внешними системами через API (в том числе с системами управления производством, BI-платформами).
5. Технические решения (рекомендуемые)
Компонент	Рекомендуемое решение
Фронтенд	React.js / Vue.js + TypeScript
Бэкенд	Node.js / Python (Django/Flask)
База данных	PostgreSQL (с партиционированием по времени)
Хранилище данных	AWS S3 / Google Cloud Storage (для архивов)
Очереди сообщений	Kafka / RabbitMQ (для обработки данных от станций)
Мониторинг	Prometheus + Grafana
Логирование	ELK-стек (Elasticsearch, Logstash, Kibana)
Развертывание	Docker + Kubernetes
CD/CI	GitLab CI / GitHub Actions
Аутентификация	JWT + OAuth2 (для внешних интеграций)
